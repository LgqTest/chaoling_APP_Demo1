(this["webpackJsonp"]=this["webpackJsonp"]||[]).push([["app-service"],{"0262":function(t,e,s){"use strict";s.r(e);var a=s("fae5"),n=s("8331");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);var r=s("828b"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},"10ff":function(t,e,s){"use strict";s.r(e);var a=s("efde"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},1640:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:t._$s(0,"sc","container"),attrs:{_i:0}},[s("view",{staticClass:t._$s(1,"sc","header"),attrs:{_i:1}},[s("text",{staticClass:t._$s(2,"sc","greeting"),attrs:{_i:2}}),s("text",{staticClass:t._$s(3,"sc","sub-greeting"),attrs:{_i:3}})]),s("view",{staticClass:t._$s(4,"sc","status-card card"),attrs:{_i:4}},[s("view",{staticClass:t._$s(5,"sc","status-item"),attrs:{_i:5}},[s("text",{staticClass:t._$s(6,"sc","label"),attrs:{_i:6}}),s("text",{staticClass:t._$s(7,"sc","value"),attrs:{_i:7}})]),s("view",{staticClass:t._$s(8,"sc","status-item"),attrs:{_i:8}},[s("text",{staticClass:t._$s(9,"sc","label"),attrs:{_i:9}}),s("text",{staticClass:t._$s(10,"sc","value"),attrs:{_i:10}})]),s("view",{staticClass:t._$s(11,"sc","status-item"),attrs:{_i:11}},[s("text",{staticClass:t._$s(12,"sc","label"),attrs:{_i:12}}),s("text",{staticClass:t._$s(13,"sc","value"),attrs:{_i:13}})])]),s("view",{staticClass:t._$s(14,"sc","section-title"),attrs:{_i:14}}),s("view",{staticClass:t._$s(15,"sc","quick-scenes"),attrs:{_i:15}},[s("view",{staticClass:t._$s(16,"sc","scene-item card"),attrs:{_i:16}},[s("text",{staticClass:t._$s(17,"sc","scene-icon"),attrs:{_i:17}}),s("text",{staticClass:t._$s(18,"sc","scene-label"),attrs:{_i:18}})]),s("view",{staticClass:t._$s(19,"sc","scene-item card"),attrs:{_i:19}},[s("text",{staticClass:t._$s(20,"sc","scene-icon"),attrs:{_i:20}}),s("text",{staticClass:t._$s(21,"sc","scene-label"),attrs:{_i:21}})]),s("view",{staticClass:t._$s(22,"sc","scene-item card"),attrs:{_i:22}},[s("text",{staticClass:t._$s(23,"sc","scene-icon"),attrs:{_i:23}}),s("text",{staticClass:t._$s(24,"sc","scene-label"),attrs:{_i:24}})]),s("view",{staticClass:t._$s(25,"sc","scene-item card"),attrs:{_i:25}},[s("text",{staticClass:t._$s(26,"sc","scene-icon"),attrs:{_i:26}}),s("text",{staticClass:t._$s(27,"sc","scene-label"),attrs:{_i:27}})])]),s("view",{staticClass:t._$s(28,"sc","section-title"),attrs:{_i:28}}),s("view",{staticClass:t._$s(29,"sc","device-list"),attrs:{_i:29}},[s("view",{staticClass:t._$s(30,"sc","device-card card"),attrs:{_i:30}},[s("view",{staticClass:t._$s(31,"sc","device-info"),attrs:{_i:31}},[s("text",{staticClass:t._$s(32,"sc","device-name"),attrs:{_i:32}}),s("text",{staticClass:t._$s(33,"sc","device-status"),attrs:{_i:33}})]),s("switch",{attrs:{_i:34}})]),s("view",{staticClass:t._$s(35,"sc","device-card card"),attrs:{_i:35}},[s("view",{staticClass:t._$s(36,"sc","device-info"),attrs:{_i:36}},[s("text",{staticClass:t._$s(37,"sc","device-name"),attrs:{_i:37}}),s("text",{staticClass:t._$s(38,"sc","device-status"),attrs:{_i:38}})]),s("switch",{attrs:{_i:39}})])])])},n=[]},1800:function(t,e,s){if("undefined"===typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(t){var e=this.constructor;return this.then((function(s){return e.resolve(t()).then((function(){return s}))}),(function(s){return e.resolve(t()).then((function(){throw s}))}))}),"undefined"!==typeof uni&&uni&&uni.requireGlobal){var a=uni.requireGlobal();ArrayBuffer=a.ArrayBuffer,Int8Array=a.Int8Array,Uint8Array=a.Uint8Array,Uint8ClampedArray=a.Uint8ClampedArray,Int16Array=a.Int16Array,Uint16Array=a.Uint16Array,Int32Array=a.Int32Array,Uint32Array=a.Uint32Array,Float32Array=a.Float32Array,Float64Array=a.Float64Array,BigInt64Array=a.BigInt64Array,BigUint64Array=a.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),__definePage("pages/home/home",(function(){return Vue.extend(s("fc57").default)})),__definePage("pages/chat/chat",(function(){return Vue.extend(s("4ff2").default)})),__definePage("pages/control/control",(function(){return Vue.extend(s("0262").default)})),__definePage("pages/scene/scene",(function(){return Vue.extend(s("eccf").default)})),__definePage("pages/mine/mine",(function(){return Vue.extend(s("81d8").default)}))},"2afd":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{scenes:[{name:"\u56de\u5bb6\u6a21\u5f0f",desc:"\u6253\u5f00\u5ba2\u5385\u706f\uff0c\u5f00\u542f\u7a7a\u6c14\u51c0\u5316\u5668",icon:"\ud83c\udfe0",color:"#e3f2fd"},{name:"\u70f9\u996a\u6a21\u5f0f",desc:"\u5f00\u542f\u6cb9\u70df\u673a\uff0c\u53a8\u623f\u706f\u5149\u8c03\u4eae",icon:"\ud83c\udf73",color:"#fff3e0"},{name:"\u79bb\u5bb6\u6a21\u5f0f",desc:"\u5173\u95ed\u6240\u6709\u7535\u5668\uff0c\u5f00\u542f\u5b89\u9632",icon:"\ud83d\udd12",color:"#ffebee"},{name:"\u7528\u9910\u6a21\u5f0f",desc:"\u64ad\u653e\u8f7b\u97f3\u4e50\uff0c\u8c03\u6574\u706f\u5149\u6c1b\u56f4",icon:"\ud83c\udf7d\ufe0f",color:"#f3e5f5"}]}},methods:{runScene:function(t){uni.showToast({title:"\u5df2\u6267\u884c".concat(t),icon:"success"})}}};e.default=a},"3b2d":function(t,e){function s(e){return t.exports=s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports["default"]=t.exports,s(e)}t.exports=s,t.exports.__esModule=!0,t.exports["default"]=t.exports},"47a9":function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports["default"]=t.exports},"4b0a":function(t,e,s){"use strict";s.r(e);var a=s("ef02"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"4ff2":function(t,e,s){"use strict";s.r(e);var a=s("9da7"),n=s("4b0a");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);var r=s("828b"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},5239:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={onLaunch:function(){t("log","App Launch"," at App.vue:4")},onShow:function(){t("log","App Show"," at App.vue:7")},onHide:function(){t("log","App Hide"," at App.vue:10")}};e.default=s}).call(this,s("f3b9")["default"])},5618:function(t,e,s){"use strict";var a=s("47a9"),n=a(s("7ca3"));s("1800");var i=a(s("951c")),r=a(s("d750"));function c(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,a)}return s}i.default.config.productionTip=!1,r.default.mpType="app";var o=new i.default(function(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?c(Object(s),!0).forEach((function(e){(0,n.default)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):c(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}({},r.default));o.$mount()},"7ca3":function(t,e,s){var a=s("d551");t.exports=function(t,e,s){return e=a(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t},t.exports.__esModule=!0,t.exports["default"]=t.exports},"81d8":function(t,e,s){"use strict";s.r(e);var a=s("ba1d"),n=s("10ff");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);var r=s("828b"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},"827e":function(t,e,s){"use strict";(function(t){var a=s("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.recognizeSpeech=e.getBaiduToken=e.chatWithAI=void 0;var n=a(s("a431"));e.getBaiduToken=function(){return new Promise((function(t,e){uni.request({url:n.default.baidu.tokenUrl,method:"POST",data:{grant_type:"client_credentials",client_id:n.default.baidu.apiKey,client_secret:n.default.baidu.secretKey},header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(s){s.data.access_token?t(s.data.access_token):e(s.data)},fail:function(t){e(t)}})}))};e.recognizeSpeech=function(e,s){return new Promise((function(a,i){t("log","\ud83d\ude80 \u4f7f\u7528\u767e\u5ea6\u6781\u901f\u7248ASR"," at common/api.js:70"),t("log","\u539f\u59cbbase64\u6570\u636e\u957f\u5ea6:",e.length," at common/api.js:71");var r=e.replace(/[\r\n\s]/g,"");t("log","\u6e05\u7406\u540ebase64\u6570\u636e\u957f\u5ea6:",r.length," at common/api.js:75");var c=function(t){if(!t)return null;var e=t.slice(0,64);try{var s=null;if("function"===typeof atob){var a=atob(e);s=new Uint8Array(a.length);for(var n=0;n<a.length;n+=1)s[n]=a.charCodeAt(n)}else"undefined"!==typeof uni&&"function"===typeof uni.base64ToArrayBuffer&&(s=new Uint8Array(uni.base64ToArrayBuffer(e)));if(!s||s.length<12)return null;var i=function(t,e){for(var a="",n=0;n<e;n+=1)a+=String.fromCharCode(s[t+n]||0);return a};if("RIFF"===i(0,4)&&"WAVE"===i(8,4))return"wav";if("ftyp"===i(4,4))return"m4a";if(255===s[0]&&240===(246&s[1]))return"aac";if("ID3"===i(0,3))return"mp3";if(255===s[0]&&224===(224&s[1]))return"mp3"}catch(r){return null}return null}(r);c&&t("log","\u68c0\u6d4b\u5230\u97f3\u9891\u683c\u5f0f:",c," at common/api.js:79");var o=r.match(/=+$/),u=o?o[0].length:0,l=Math.max(0,Math.floor(.75*r.length)-u);t("log","\u4f30\u8ba1\u7684\u539f\u59cb\u97f3\u9891\u5927\u5c0f:",l," at common/api.js:86");var f=n.default&&n.default.baidu?n.default.baidu:{},d=f.asrFormat||"m4a",p=Number.isFinite(f.asrDevPid)?f.asrDevPid:80001,_=80001===p?["m4a","pcm","wav","amr"]:["pcm","wav","amr"];if("aac"===c){var v={err_no:3316,err_msg:"\u5f55\u97f3\u4e3aAAC(ADTS)\u683c\u5f0f\uff0c\u767e\u5ea6\u6781\u901f\u7248\u4e0d\u652f\u6301raw AAC\uff0c\u8bf7\u6539\u4e3am4a\u5bb9\u5668\u6216wav/pcm",format:c};return t("warn","\u68c0\u6d4b\u5230AAC(ADTS)\uff0c\u7ec8\u6b62\u8bc6\u522b:",v," at common/api.js:102"),void i(v)}if("mp3"===c){var h={err_no:3312,err_msg:"\u5f55\u97f3\u4e3aMP3\u683c\u5f0f\uff0c\u767e\u5ea6\u6781\u901f\u7248\u4e0d\u652f\u6301MP3\uff0c\u8bf7\u6539\u4e3am4a\u6216wav/pcm",format:c};return t("warn","\u68c0\u6d4b\u5230MP3\uff0c\u7ec8\u6b62\u8bc6\u522b:",h," at common/api.js:112"),void i(h)}var m=[];c&&_.includes(c)&&m.push(c),_.includes(d)&&!m.includes(d)&&m.push(d);for(var g=0,y=_;g<y.length;g++){var b=y[g];m.includes(b)||m.push(b)}var $=f.recognitionUrl||"https://vop.baidu.com/server_api",C=f.recognitionProUrl||"https://vop.baidu.com/pro_api",x={format:m[0],rate:16e3,channel:1,cuid:"uniapp-user-"+Date.now(),token:s,speech:r,len:l,dev_pid:p};t("log","\u53d1\u9001\u7684\u5b8c\u6574\u53c2\u6570:",{format:x.format,rate:x.rate,channel:x.channel,dev_pid:x.dev_pid,len:x.len,speech_length:x.speech.length}," at common/api.js:136");var w=80001===p?C:$,O=w===$?C:$;(function e(s,n,r){var c=m[r]||d||"m4a";x.format=c,t("log","\u53d1\u9001ASR\u8bf7\u6c42\u5230:",s,"format:",x.format," at common/api.js:151"),t("log","\u53d1\u9001\u7684\u5b8c\u6574\u53c2\u6570:",{format:x.format,rate:x.rate,channel:x.channel,dev_pid:x.dev_pid,len:x.len,speech_length:x.speech.length}," at common/api.js:152"),uni.request({url:s,method:"POST",data:x,header:{"Content-Type":"application/json"},success:function(c){var o=c&&c.data?c.data:{};return t("log","\u767e\u5ea6API\u54cd\u5e94:",o," at common/api.js:169"),0===o.err_no?(t("log","\u8bc6\u522b\u6210\u529f:",o.result," at common/api.js:171"),void a(o.result[0])):3302===o.err_no&&!n&&O&&O!==s?(t("warn","\u6743\u9650\u9519\u8bef\uff0c\u5c1d\u8bd5\u5907\u7528URL:",O," at common/api.js:176"),void e(O,!0,r)):3312===o.err_no&&r+1<m.length?(t("warn","\u683c\u5f0f\u4e0d\u652f\u6301\uff0c\u5c1d\u8bd5\u5907\u7528\u683c\u5f0f:",m[r+1]," at common/api.js:181"),void e(s,n,r+1)):3302===o.err_no?(t("error","\u6781\u901f\u7248\u6743\u9650\u672a\u5f00\u901a\u6216Token\u65e0\u6548"," at common/api.js:186"),t("error","\u8bf7\u68c0\u67e5\uff1a"," at common/api.js:187"),t("error",'1. \u662f\u5426\u5728\u767e\u5ea6\u4e91\u63a7\u5236\u53f0\u5f00\u901a\u4e86"\u8bed\u97f3\u8bc6\u522b-\u6781\u901f\u7248"'," at common/api.js:188"),t("error","2. API Key\u662f\u5426\u6b63\u786e"," at common/api.js:189"),void i(o)):(t("error","\u767e\u5ea6API\u9519\u8bef\u7801:",o.err_no,"\u9519\u8bef\u4fe1\u606f:",o.err_msg," at common/api.js:193"),t("error","\u5b8c\u6574\u54cd\u5e94:",JSON.stringify(o)," at common/api.js:194"),void i(o))},fail:function(e){t("error","\u7f51\u7edc\u8bf7\u6c42\u5931\u8d25:",e," at common/api.js:198"),i(e)}})})(w,!1,0)}))};e.chatWithAI=function(t){return new Promise((function(e,s){uni.request({url:n.default.moonshot.apiUrl,method:"POST",data:{model:n.default.moonshot.model,messages:t,temperature:.3},header:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.default.moonshot.apiKey)},success:function(t){t.data.choices&&t.data.choices.length>0?e(t.data.choices[0].message.content):s(t.data)},fail:function(t){s(t)}})}))}}).call(this,s("f3b9")["default"])},"828b":function(t,e,s){"use strict";function a(t,e,s,a,n,i,r,c,o,u){var l,f="function"===typeof t?t.options:t;if(o){f.components||(f.components={});var d=Object.prototype.hasOwnProperty;for(var p in o)d.call(o,p)&&!d.call(f.components,p)&&(f.components[p]=o[p])}if(u&&("function"===typeof u.beforeCreate&&(u.beforeCreate=[u.beforeCreate]),(u.beforeCreate||(u.beforeCreate=[])).unshift((function(){this[u.__module]=this})),(f.mixins||(f.mixins=[])).push(u)),e&&(f.render=e,f.staticRenderFns=s,f._compiled=!0),a&&(f.functional=!0),i&&(f._scopeId="data-v-"+i),r?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},f._ssrRegister=l):n&&(l=c?function(){n.call(this,this.$root.$options.shadowRoot)}:n),l)if(f.functional){f._injectStyles=l;var _=f.render;f.render=function(t,e){return l.call(e),_(t,e)}}else{var v=f.beforeCreate;f.beforeCreate=v?[].concat(v,l):[l]}return{exports:t,options:f}}s.d(e,"a",(function(){return a}))},8331:function(t,e,s){"use strict";s.r(e);var a=s("9571"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"8f3a":function(t,e,s){"use strict";s.r(e);var a=s("5239"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},"951c":function(t,e){t.exports=Vue},9571:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{devices:[{name:"\u667a\u80fd\u6cb9\u70df\u673a",icon:"\ud83d\udca8",isOn:!0},{name:"\u84b8\u70e4\u4e00\u4f53\u673a",icon:"\ud83e\udd58",isOn:!1},{name:"\u6d17\u7897\u673a",icon:"\ud83c\udf7d\ufe0f",isOn:!0},{name:"\u51c0\u6c34\u5668",icon:"\ud83d\udca7",isOn:!0},{name:"\u6d88\u6bd2\u67dc",icon:"\u2728",isOn:!1},{name:"\u51b0\u7bb1",icon:"\ud83e\uddca",isOn:!0},{name:"\u71c3\u6c14\u7076",icon:"\ud83d\udd25",isOn:!1},{name:"\u5496\u5561\u673a",icon:"\u2615",isOn:!1}]}},methods:{toggleDevice:function(t){this.devices[t].isOn=!this.devices[t].isOn}}}},"9da7":function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:t._$s(0,"sc","container chat-container"),attrs:{_i:0}},[s("scroll-view",{staticClass:t._$s(1,"sc","msg-list"),attrs:{"scroll-top":t._$s(1,"a-scroll-top",t.scrollTop),"scroll-into-view":t._$s(1,"a-scroll-into-view",t.scrollIntoView),_i:1}},[t._l(t._$s(2,"f",{forItems:t.messages}),(function(e,a,n,i){return s("view",{key:t._$s(2,"f",{forIndex:n,key:a}),staticClass:t._$s("2-"+i,"sc","msg-item"),attrs:{id:t._$s("2-"+i,"a-id","msg-"+a),_i:"2-"+i}},[s("view",{staticClass:t._$s("3-"+i,"sc","msg-content"),class:t._$s("3-"+i,"c","user"===e.role?"user-msg":"ai-msg"),attrs:{_i:"3-"+i}},[s("view",{staticClass:t._$s("4-"+i,"sc","avatar"),attrs:{_i:"4-"+i}},[s("text",[t._v(t._$s("5-"+i,"t0-0",t._s("user"===e.role?"\ud83d\udc64":"\ud83e\udd16")))])]),s("view",{staticClass:t._$s("6-"+i,"sc","bubble"),attrs:{_i:"6-"+i}},[s("text",[t._v(t._$s("7-"+i,"t0-0",t._s(e.content)))])])])])})),t._$s(8,"i",t.isProcessing)?s("view",{staticClass:t._$s(8,"sc","msg-item"),attrs:{_i:8}},[s("view",{staticClass:t._$s(9,"sc","msg-content ai-msg"),attrs:{_i:9}},[s("view",{staticClass:t._$s(10,"sc","avatar"),attrs:{_i:10}},[s("text")]),s("view",{staticClass:t._$s(12,"sc","bubble processing"),attrs:{_i:12}},[s("text")])])]):t._e(),s("view")],2),s("view",{staticClass:t._$s(15,"sc","bottom-bar"),attrs:{_i:15}},[s("view",{staticClass:t._$s(16,"sc","record-btn"),class:t._$s(16,"c",{recording:t.isRecording}),attrs:{_i:16},on:{touchstart:t.startRecord,touchend:t.stopRecord,mousedown:t.startRecord,mouseup:t.stopRecord}},[s("text",{staticClass:t._$s(17,"sc","mic-icon"),attrs:{_i:17}}),s("text",[t._v(t._$s(18,"t0-0",t._s(t.statusText)))])])])])},n=[]},a431:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={baidu:{apiKey:"SMUfwKoXuuyYO1jaitLtjVuJ",secretKey:"0NwMYgc4M3vIX4IpYhQbhO8XPYlq0NhS",tokenUrl:"https://aip.baidubce.com/oauth/2.0/token",recognitionUrl:"https://vop.baidu.com/server_api",recognitionProUrl:"https://vop.baidu.com/pro_api",asrFormat:"wav",asrDevPid:80001},moonshot:{apiKey:"sk-vKb7RjHjgkfzyMt5ZuTyBcj6YYieyQFbJFnjtBbNSSFQsW27",apiUrl:"https://api.moonshot.cn/v1/chat/completions",model:"moonshot-v1-8k"}}},a515:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{}},methods:{}}},b22b:function(t,e,s){"use strict";s.r(e);var a=s("2afd"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},ba1d:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:t._$s(0,"sc","container"),attrs:{_i:0}},[s("view",{staticClass:t._$s(1,"sc","user-header card"),attrs:{_i:1}},[s("view",{staticClass:t._$s(2,"sc","avatar"),attrs:{_i:2}},[s("text")]),s("view",{staticClass:t._$s(4,"sc","user-info"),attrs:{_i:4}},[s("text",{staticClass:t._$s(5,"sc","username"),attrs:{_i:5}}),s("text",{staticClass:t._$s(6,"sc","user-role"),attrs:{_i:6}})])]),s("view",{staticClass:t._$s(7,"sc","menu-list card"),attrs:{_i:7}},[s("view",{staticClass:t._$s(8,"sc","menu-item"),attrs:{_i:8}},[s("text",{staticClass:t._$s(9,"sc","menu-icon"),attrs:{_i:9}}),s("text",{staticClass:t._$s(10,"sc","menu-text"),attrs:{_i:10}}),s("text",{staticClass:t._$s(11,"sc","arrow"),attrs:{_i:11}})]),s("view",{staticClass:t._$s(12,"sc","menu-item"),attrs:{_i:12}},[s("text",{staticClass:t._$s(13,"sc","menu-icon"),attrs:{_i:13}}),s("text",{staticClass:t._$s(14,"sc","menu-text"),attrs:{_i:14}}),s("text",{staticClass:t._$s(15,"sc","arrow"),attrs:{_i:15}})]),s("view",{staticClass:t._$s(16,"sc","menu-item"),attrs:{_i:16}},[s("text",{staticClass:t._$s(17,"sc","menu-icon"),attrs:{_i:17}}),s("text",{staticClass:t._$s(18,"sc","menu-text"),attrs:{_i:18}}),s("text",{staticClass:t._$s(19,"sc","arrow"),attrs:{_i:19}})]),s("view",{staticClass:t._$s(20,"sc","menu-item"),attrs:{_i:20}},[s("text",{staticClass:t._$s(21,"sc","menu-icon"),attrs:{_i:21}}),s("text",{staticClass:t._$s(22,"sc","menu-text"),attrs:{_i:22}}),s("text",{staticClass:t._$s(23,"sc","arrow"),attrs:{_i:23}})]),s("view",{staticClass:t._$s(24,"sc","menu-item"),attrs:{_i:24}},[s("text",{staticClass:t._$s(25,"sc","menu-icon"),attrs:{_i:25}}),s("text",{staticClass:t._$s(26,"sc","menu-text"),attrs:{_i:26}}),s("text",{staticClass:t._$s(27,"sc","arrow"),attrs:{_i:27}})])]),s("view",{staticClass:t._$s(28,"sc","btn logout-btn"),attrs:{_i:28}})])},n=[]},d551:function(t,e,s){var a=s("3b2d")["default"],n=s("e6db");t.exports=function(t){var e=n(t,"string");return"symbol"==a(e)?e:e+""},t.exports.__esModule=!0,t.exports["default"]=t.exports},d750:function(t,e,s){"use strict";s.r(e);var a=s("8f3a");for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(n);var i=s("828b"),r=Object(i["a"])(a["default"],void 0,void 0,!1,null,null,null,!1,void 0,void 0);e["default"]=r.exports},e6db:function(t,e,s){var a=s("3b2d")["default"];t.exports=function(t,e){if("object"!=a(t)||!t)return t;var s=t[Symbol.toPrimitive];if(void 0!==s){var n=s.call(t,e||"default");if("object"!=a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports["default"]=t.exports},e901:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:t._$s(0,"sc","container"),attrs:{_i:0}},[s("view",{staticClass:t._$s(1,"sc","title"),attrs:{_i:1}}),s("view",{staticClass:t._$s(2,"sc","scene-list"),attrs:{_i:2}},t._l(t._$s(3,"f",{forItems:t.scenes}),(function(e,a,n,i){return s("view",{key:t._$s(3,"f",{forIndex:n,key:a}),staticClass:t._$s("3-"+i,"sc","scene-card card"),attrs:{_i:"3-"+i}},[s("view",{staticClass:t._$s("4-"+i,"sc","scene-info"),attrs:{_i:"4-"+i}},[s("view",{staticClass:t._$s("5-"+i,"sc","scene-icon-wrapper"),style:t._$s("5-"+i,"s",{background:e.color}),attrs:{_i:"5-"+i}},[s("text",{staticClass:t._$s("6-"+i,"sc","scene-icon"),attrs:{_i:"6-"+i}},[t._v(t._$s("6-"+i,"t0-0",t._s(e.icon)))])]),s("view",{staticClass:t._$s("7-"+i,"sc","scene-text"),attrs:{_i:"7-"+i}},[s("text",{staticClass:t._$s("8-"+i,"sc","scene-name"),attrs:{_i:"8-"+i}},[t._v(t._$s("8-"+i,"t0-0",t._s(e.name)))]),s("text",{staticClass:t._$s("9-"+i,"sc","scene-desc"),attrs:{_i:"9-"+i}},[t._v(t._$s("9-"+i,"t0-0",t._s(e.desc)))])])]),s("view",{staticClass:t._$s("10-"+i,"sc","btn-run"),attrs:{_i:"10-"+i},on:{click:function(s){return t.runScene(e.name)}}})])})),0),s("view",{staticClass:t._$s(11,"sc","create-btn"),attrs:{_i:11}},[s("text",{staticClass:t._$s(12,"sc","plus"),attrs:{_i:12}}),s("text")])])},n=[]},ea5e:function(t,e,s){"use strict";s.r(e);var a=s("a515"),n=s.n(a);for(var i in a)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=n.a},eccf:function(t,e,s){"use strict";s.r(e);var a=s("e901"),n=s("b22b");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);var r=s("828b"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports},ef02:function(t,e,s){"use strict";(function(t){var a=s("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s("827e"),i=a(s("a431")),r=uni.getRecorderManager(),c={data:function(){return{messages:[{role:"assistant",content:"\u4f60\u597d\uff01\u6211\u662f\u4f60\u7684\u53a8\u7535\u667a\u80fd\u52a9\u624b\uff0c\u8bf7\u95ee\u6709\u4ec0\u4e48\u53ef\u4ee5\u5e2e\u4f60\uff1f"}],isRecording:!1,isProcessing:!1,scrollTop:0,scrollIntoView:"",statusText:"\u6309\u4f4f\u8bf4\u8bdd",baiduToken:"",usePlusRecorder:!1,plusRecorder:null,recordStartTime:0,minRecordMs:800,minFileBytes:8e3,lastTouchAt:0}},onLoad:function(){this.initBaiduToken(),this.setupRecorder()},methods:{initBaiduToken:function(){var e=this;t("log","\u68c0\u67e5API Key\u914d\u7f6e:",{baiduKey:i.default.baidu.apiKey?"\u5df2\u914d\u7f6e":"\u672a\u914d\u7f6e",moonshotKey:i.default.moonshot.apiKey?"\u5df2\u914d\u7f6e":"\u672a\u914d\u7f6e"}," at pages/chat/chat.vue:74"),"YOUR_BAIDU_API_KEY"!==i.default.baidu.apiKey?(0,n.getBaiduToken)().then((function(s){e.baiduToken=s,t("log","\u767e\u5ea6Token\u83b7\u53d6\u6210\u529f"," at pages/chat/chat.vue:86"),e.appendSystemMsg("\u8bed\u97f3\u670d\u52a1\u5df2\u5c31\u7eea")})).catch((function(s){t("error","Token\u83b7\u53d6\u5931\u8d25:",s," at pages/chat/chat.vue:89"),e.appendSystemMsg("\u767e\u5ea6\u8bed\u97f3Token\u83b7\u53d6\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u6216Key\u914d\u7f6e")})):this.appendSystemMsg("\u8bf7\u5728 common/config.js \u4e2d\u914d\u7f6e\u767e\u5ea6API Key")},setupRecorder:function(){var e=this;this.setupPlusRecorder(),r.onStart((function(){t("log","\u5f55\u97f3\u5f00\u59cb"," at pages/chat/chat.vue:97"),e.isRecording=!0,e.statusText="\u677e\u5f00\u7ed3\u675f",e.recordStartTime=Date.now()})),r.onStop((function(s){t("log","\u5f55\u97f3\u505c\u6b62\uff0c\u6587\u4ef6\u8def\u5f84:",s.tempFilePath," at pages/chat/chat.vue:104"),t("log","\u5f55\u97f3\u65f6\u957f:",(s.duration||"\u672a\u77e5")+"ms"," at pages/chat/chat.vue:105"),t("log","\u6587\u4ef6\u5927\u5c0f:",(s.fileSize||"\u672a\u77e5")+"bytes"," at pages/chat/chat.vue:106"),e.isRecording=!1,e.statusText="\u6309\u4f4f\u8bf4\u8bdd",t("log","\u5b8c\u6574\u7684\u5f55\u97f3\u7ed3\u679c:",JSON.stringify(s)," at pages/chat/chat.vue:111");var a=s.duration||Date.now()-e.recordStartTime,n=s.fileSize||0;e.shouldProcessRecording(a,n)&&e.handleRecording(s.tempFilePath)})),r.onError((function(s){t("error","\u5f55\u97f3\u9519\u8bef:",s," at pages/chat/chat.vue:122"),e.isRecording=!1,e.statusText="\u6309\u4f4f\u8bf4\u8bdd",e.appendSystemMsg("\u5f55\u97f3\u5931\u8d25: "+(s.errMsg||JSON.stringify(s)))}))},startRecord:function(e){t("log","?????????"," at pages/chat/chat.vue:130"),e&&e.preventDefault&&e.preventDefault();var s=Date.now(),a=e&&e.type?e.type:"",n=0===a.indexOf("touch"),i=0===a.indexOf("mouse");n&&(this.lastTouchAt=s),i&&s-this.lastTouchAt<500?t("log","????????"," at pages/chat/chat.vue:139"):this.isRecording?t("log","????????start"," at pages/chat/chat.vue:144"):this.usePlusRecorder&&this.plusRecorder?this.startPlusRecord():this.startUniRecord()},stopRecord:function(e){t("log","?????????"," at pages/chat/chat.vue:157"),e&&e.preventDefault&&e.preventDefault();var s=Date.now(),a=e&&e.type?e.type:"",n=0===a.indexOf("mouse");n&&s-this.lastTouchAt<500?t("log","????????"," at pages/chat/chat.vue:164"):this.isRecording?this.usePlusRecorder&&this.plusRecorder?this.stopPlusRecord():this.stopUniRecord():t("log","???????stop"," at pages/chat/chat.vue:169")},startUniRecord:function(){t("log","??uni??(WAV)"," at pages/chat/chat.vue:182"),this.isRecording=!0,this.statusText="????",this.recordStartTime=Date.now(),uni.getRecorderManager().start({duration:6e4,format:"wav",numberOfChannels:1,sampleRate:16e3}),t("log","???????"," at pages/chat/chat.vue:192")},stopUniRecord:function(){uni.getRecorderManager().stop(),this.isRecording=!1,t("log","?????????"," at pages/chat/chat.vue:198")},setupPlusRecorder:function(){var e=this,s=function(){e.plusRecorder||"undefined"!==typeof plus&&plus.audio&&plus.audio.getRecorder&&(e.plusRecorder=plus.audio.getRecorder(),e.usePlusRecorder=!0,t("log","\u4f7f\u7528plus.audio\u5f55\u97f3\u5668(WAV)"," at pages/chat/chat.vue:208"))};"undefined"!==typeof plus?s():"undefined"!==typeof document&&document.addEventListener&&document.addEventListener("plusready",s)},handleRecording:function(e){var s=this;if(!this.baiduToken)return this.appendSystemMsg("\u8bed\u97f3\u670d\u52a1\u672a\u5c31\u7eea\uff0c\u8bf7\u7b49\u5f85Token\u52a0\u8f7d"),void t("error","\u767e\u5ea6Token\u672a\u83b7\u53d6"," at pages/chat/chat.vue:222");this.isProcessing=!0,this.appendSystemMsg("\u6b63\u5728\u8bc6\u522b\u8bed\u97f3..."),t("log","\u5f00\u59cb\u8bfb\u53d6\u5f55\u97f3\u6587\u4ef6:",e," at pages/chat/chat.vue:229");var a=uni.getFileSystemManager();a&&"function"===typeof a.readFile?(t("log","\u4f7f\u7528 uni.getFileSystemManager \u8bfb\u53d6\u6587\u4ef6"," at pages/chat/chat.vue:235"),a.readFile({filePath:e,encoding:"base64",success:function(e){t("log","\u5f55\u97f3\u6587\u4ef6\u8bfb\u53d6\u6210\u529f\uff0c\u5927\u5c0f:",e.data.length," at pages/chat/chat.vue:240"),s.processSpeech(e.data)},fail:function(a){t("error","\u8bfb\u53d6\u5f55\u97f3\u6587\u4ef6\u5931\u8d25\uff0c\u5c1d\u8bd5\u5907\u7528\u65b9\u6848:",a," at pages/chat/chat.vue:244"),s.readFileWithPlusIO(e)}})):(t("log","getFileSystemManager\u4e0d\u53ef\u7528\uff0c\u76f4\u63a5\u4f7f\u7528 plus.io \u8bfb\u53d6"," at pages/chat/chat.vue:249"),this.readFileWithPlusIO(e))},readFileWithPlusIO:function(e){var s=this;t("log","\u4f7f\u7528 plus.io \u8bfb\u53d6\u6587\u4ef6\uff0c\u8def\u5f84:",e," at pages/chat/chat.vue:256"),plus.io.resolveLocalFileSystemURL(e,(function(e){t("log","\u6587\u4ef6\u89e3\u6790\u6210\u529f\uff0c\u5f00\u59cb\u8bfb\u53d6"," at pages/chat/chat.vue:261"),e.file((function(e){if(t("log","\u6587\u4ef6\u5bf9\u8c61\u83b7\u53d6\u6210\u529f\uff0c\u5927\u5c0f:",e.size," at pages/chat/chat.vue:264"),s.shouldProcessRecording(null,e.size)){var a=new plus.io.FileReader;a.onload=function(e){t("log","plus.io \u8bfb\u53d6\u6210\u529f\uff0c\u7ed3\u679c\u957f\u5ea6:",e.target.result.length," at pages/chat/chat.vue:273");var a=e.target.result.split(",")[1];s.processSpeech(a)},a.onerror=function(e){t("error","FileReader \u8bfb\u53d6\u5931\u8d25:",e," at pages/chat/chat.vue:280"),s.isProcessing=!1,s.appendSystemMsg("\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\u5931\u8d25")},a.readAsDataURL(e)}else s.isProcessing=!1}),(function(e){t("error","\u83b7\u53d6\u6587\u4ef6\u5bf9\u8c61\u5931\u8d25:",e," at pages/chat/chat.vue:288"),s.isProcessing=!1,s.appendSystemMsg("\u83b7\u53d6\u6587\u4ef6\u5bf9\u8c61\u5931\u8d25: "+JSON.stringify(e))}))}),(function(e){t("error","\u6587\u4ef6\u89e3\u6790\u5931\u8d25:",e," at pages/chat/chat.vue:294"),s.isProcessing=!1,s.appendSystemMsg("\u6587\u4ef6\u89e3\u6790\u5931\u8d25\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u8def\u5f84")}))},processSpeech:function(e){var s=this;t("log","\u5f00\u59cb\u8bed\u97f3\u8bc6\u522b\uff0c\u6570\u636e\u957f\u5ea6:",e.length," at pages/chat/chat.vue:308"),(0,n.recognizeSpeech)(e,this.baiduToken).then((function(e){t("log","\u8bed\u97f3\u8bc6\u522b\u7ed3\u679c:",e," at pages/chat/chat.vue:311");var a=e;a?(s.messages=s.messages.filter((function(t){return!t.content.includes("\u6b63\u5728\u8bc6\u522b\u8bed\u97f3")})),s.addMessage("user",a),s.callLLM()):(s.appendSystemMsg("\u672a\u8bc6\u522b\u5230\u8bed\u97f3\uff0c\u8bf7\u91cd\u8bd5"),s.isProcessing=!1)})).catch((function(e){t("error","\u8bed\u97f3\u8bc6\u522b\u5931\u8d25:",e," at pages/chat/chat.vue:324"),s.isProcessing=!1,s.appendSystemMsg("\u8bed\u97f3\u8bc6\u522b\u5931\u8d25: "+JSON.stringify(e))}))},callLLM:function(){var e=this,s=this.messages.filter((function(t){return"user"===t.role||"assistant"===t.role}));if("YOUR_MOONSHOT_API_KEY"===i.default.moonshot.apiKey)return this.isProcessing=!1,void this.appendSystemMsg("\u8bf7\u914d\u7f6eMoonshot API Key\u4ee5\u542f\u7528AI\u5bf9\u8bdd");(0,n.chatWithAI)(s).then((function(t){e.isProcessing=!1,e.addMessage("assistant",t)})).catch((function(s){t("error","LLM Error",s," at pages/chat/chat.vue:346"),e.isProcessing=!1,e.appendSystemMsg("AI\u601d\u8003\u51fa\u4e86\u70b9\u95ee\u9898")}))},addMessage:function(t,e){this.messages.push({role:t,content:e}),this.scrollToBottom()},appendSystemMsg:function(t){this.messages.push({role:"system",content:"[\u7cfb\u7edf\u63d0\u793a] ".concat(t)}),this.scrollToBottom()},scrollToBottom:function(){var t=this;setTimeout((function(){t.scrollTop=99999,t.scrollIntoView="msg-"+(t.messages.length-1)}),100)}}};e.default=c}).call(this,s("f3b9")["default"])},efde:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{}},methods:{}}},f3b9:function(t,e,s){"use strict";function a(t){var e=Object.prototype.toString.call(t);return e.substring(8,e.length-1)}function n(){return"string"===typeof __channelId__&&__channelId__}function i(t,e){switch(a(e)){case"Function":return"function() { [native code] }";default:return e}}function r(t){for(var e=arguments.length,s=new Array(e>1?e-1:0),a=1;a<e;a++)s[a-1]=arguments[a];console[t].apply(console,s)}function c(){for(var t=arguments.length,e=new Array(t),s=0;s<t;s++)e[s]=arguments[s];var r=e.shift();if(n())return e.push(e.pop().replace("at ","uni-app:///")),console[r].apply(console,e);var c=e.map((function(t){var e=Object.prototype.toString.call(t).toLowerCase();if("[object object]"===e||"[object array]"===e)try{t="---BEGIN:JSON---"+JSON.stringify(t,i)+"---END:JSON---"}catch(n){t=e}else if(null===t)t="---NULL---";else if(void 0===t)t="---UNDEFINED---";else{var s=a(t).toUpperCase();t="NUMBER"===s||"BOOLEAN"===s?"---BEGIN:"+s+"---"+t+"---END:"+s+"---":String(t)}return t})),o="";if(c.length>1){var u=c.pop();o=c.join("---COMMA---"),0===u.indexOf(" at ")?o+=u:o+="---COMMA---"+u}else o=c[0];console[r](o)}s.r(e),s.d(e,"log",(function(){return r})),s.d(e,"default",(function(){return c}))},fae5:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("view",{staticClass:t._$s(0,"sc","container"),attrs:{_i:0}},[s("view",{staticClass:t._$s(1,"sc","title"),attrs:{_i:1}}),s("view",{staticClass:t._$s(2,"sc","category-tabs"),attrs:{_i:2}},[s("text",{staticClass:t._$s(3,"sc","tab active"),attrs:{_i:3}}),s("text",{staticClass:t._$s(4,"sc","tab"),attrs:{_i:4}}),s("text",{staticClass:t._$s(5,"sc","tab"),attrs:{_i:5}})]),s("view",{staticClass:t._$s(6,"sc","device-grid"),attrs:{_i:6}},t._l(t._$s(7,"f",{forItems:t.devices}),(function(e,a,n,i){return s("view",{key:t._$s(7,"f",{forIndex:n,key:a}),staticClass:t._$s("7-"+i,"sc","device-item card"),attrs:{_i:"7-"+i}},[s("view",{staticClass:t._$s("8-"+i,"sc","device-header"),attrs:{_i:"8-"+i}},[s("text",{staticClass:t._$s("9-"+i,"sc","device-icon"),attrs:{_i:"9-"+i}},[t._v(t._$s("9-"+i,"t0-0",t._s(e.icon)))]),s("switch",{attrs:{checked:t._$s("10-"+i,"a-checked",e.isOn),_i:"10-"+i},on:{change:function(e){return t.toggleDevice(a)}}})]),s("text",{staticClass:t._$s("11-"+i,"sc","device-name"),attrs:{_i:"11-"+i}},[t._v(t._$s("11-"+i,"t0-0",t._s(e.name)))]),s("text",{staticClass:t._$s("12-"+i,"sc","device-state"),attrs:{_i:"12-"+i}},[t._v(t._$s("12-"+i,"t0-0",t._s(e.isOn?"\u8fd0\u884c\u4e2d":"\u5df2\u5173\u95ed")))])])})),0)])},n=[]},fc57:function(t,e,s){"use strict";s.r(e);var a=s("1640"),n=s("ea5e");for(var i in n)["default"].indexOf(i)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(i);var r=s("828b"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],void 0);e["default"]=c.exports}},[["5618","app-config"]]]);